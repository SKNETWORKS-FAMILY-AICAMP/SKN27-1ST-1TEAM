# ğŸ—„ï¸ Database & Docker ì„¤ì • ê°€ì´ë“œ (DB_SETUP_GUIDE)

ì´ ë¬¸ì„œëŠ” í”„ë¡œì íŠ¸ì— MySQL ë°ì´í„°ë² ì´ìŠ¤ì™€ Dockerë¥¼ ë„ì…í•˜ë©´ì„œ ì„¤ì¹˜í•œ í•­ëª©ë“¤ê³¼ ì„¤ì • ê³¼ì •ì„ ê¸°ë¡í•©ë‹ˆë‹¤.

## ğŸ› ï¸ ì„¤ì¹˜ ë° ë„êµ¬

### 1. Docker & Docker Compose
- **ìš©ë„**: ì• í”Œë¦¬ì¼€ì´ì…˜(Streamlit)ê³¼ ë°ì´í„°ë² ì´ìŠ¤(MySQL)ë¥¼ ë…ë¦½ëœ ì»¨í…Œì´ë„ˆ í™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.
- **ì„¤ì¹˜**: [Docker Desktop](https://www.docker.com/products/docker-desktop/) ì„¤ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.

### 2. MySQL 8.0
- **ìš©ë„**: ë”ë¯¸ ë°ì´í„°ë¥¼ ëŒ€ì²´í•  ì‹¤ì œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤.
- **ì„¤ì •**: Docker ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ ì‹¤í–‰ë˜ë¯€ë¡œ ë³„ë„ì˜ ë¡œì»¬ ì„¤ì¹˜ëŠ” í•„ìš”í•˜ì§€ ì•Šì§€ë§Œ, ê´€ë¦¬ ë„êµ¬ë¡œ ì—°ê²°í•©ë‹ˆë‹¤.

### 3. DBeaver
- **ìš©ë„**: GUI í™˜ê²½ì—ì„œ MySQL ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ì†í•˜ì—¬ í…Œì´ë¸”ì„ ì„¤ê³„í•˜ê³  ë°ì´í„°ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
- **ì—°ê²° ì •ë³´ (Docker ì‹¤í–‰ í›„)**:
  - **Host**: `localhost`
  - **Port**: `3306`
  - **Database**: `mobility_db`
  - **Username**: `user`
  - **Password**: `password`

---

## ğŸ—ï¸ êµ¬ì„± ë‹¨ê³„

### 1. Docker í™˜ê²½ ì„¤ì • (`Dockerfile`)
- Streamlit ì•±ì„ ì´ë¯¸í™”í•˜ê¸° ìœ„í•œ ê°€ì´ë“œë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.
- Python 3.11 í™˜ê²½ì„ ê¸°ë°˜ìœ¼ë¡œ í•„ìˆ˜ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

### 2. ì„œë¹„ìŠ¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ (`docker-compose.yml`)
- `db` (MySQL) ì„œë¹„ìŠ¤ì™€ `app` (Streamlit) ì„œë¹„ìŠ¤ë¥¼ í•˜ë‚˜ì˜ ë„¤íŠ¸ì›Œí¬ë¡œ ë¬¶ì–´ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.
- ë°ì´í„° ì˜ì†ì„±ì„ ìœ„í•´ `docker volume`ì„ ì„¤ì •í•˜ì—¬ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ì–´ë„ DB ë°ì´í„°ê°€ ìœ ì§€ë˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

### 3. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€ (`requirements.txt`)
- `mysql-connector-python`: íŒŒì´ì¬ì—ì„œ MySQLì— ì ‘ì†í•˜ê¸° ìœ„í•œ ë“œë¼ì´ë²„
- `sqlalchemy`: ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ì‘ìš©í•˜ê¸° ìœ„í•œ ORM ë„êµ¬

---

## ğŸ–¥ï¸ DBeaverë¥¼ í†µí•œ í…Œì´ë¸” ë° ë°ì´í„° ê´€ë¦¬

### 1. í…Œì´ë¸” ìƒì„± (GUI ë°©ì‹)
1. DBeaverì—ì„œ `mobility_db` ì—°ê²°ì„ í™•ì¥í•©ë‹ˆë‹¤.
2. `Tables` í•­ëª©ì—ì„œ ìš°í´ë¦­ -> `Create New Table`ì„ ì„ íƒí•©ë‹ˆë‹¤.
3. í…Œì´ë¸” ì´ë¦„ì„ ì…ë ¥í•˜ê³ , í•˜ë‹¨ì˜ `Columns` íƒ­ì—ì„œ ì»¬ëŸ¼(ID, ì´ë¦„, ê°’ ë“±)ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
4. `Save` ë˜ëŠ” `Ctrl+S`ë¥¼ ëˆ„ë¥´ê³  ë‚˜íƒ€ë‚˜ëŠ” `Keep Changes` ì°½ì—ì„œ `Execution`ì„ í´ë¦­í•˜ì—¬ ì‹¤ì œ DBì— ë°˜ì˜í•©ë‹ˆë‹¤.

### 2. ë°ì´í„° ì…ë ¥ (GUI ë°©ì‹)
1. ìƒì„±ëœ í…Œì´ë¸”ì„ ë”ë¸” í´ë¦­í•˜ì—¬ ë°ì´í„° í¸ì§‘ê¸°(Data tab)ë¥¼ ì—½ë‹ˆë‹¤.
2. í•˜ë‹¨ì˜ `[+]` ë²„íŠ¼(Add row)ì„ ëˆŒëŸ¬ í–‰ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
3. ê° ì…€ì„ í´ë¦­í•˜ì—¬ ë°ì´í„°ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
4. í•˜ë‹¨ì˜ `Save` (ë˜ëŠ” `Ctrl+S`)ë¥¼ ëˆŒëŸ¬ ë³€ê²½ì‚¬í•­ì„ ì»¤ë°‹í•©ë‹ˆë‹¤.

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ì„ ìœ„í•œ SQL ìŠ¤í¬ë¦½íŠ¸

DBeaverì˜ `SQL Editor` (Ctrl+Enter)ì— ì•„ë˜ ì¿¼ë¦¬ë¥¼ ë¶™ì—¬ë„£ê³  ì‹¤í–‰í•˜ë©´ í•œ ë²ˆì— ì„¸íŒ…ë©ë‹ˆë‹¤.

### 1. ì§€ì—­ë³„/ì—°ë„ë³„ ì¹œí™˜ê²½ì°¨ ë³´ê¸‰ í˜„í™© í…Œì´ë¸”
```sql
CREATE TABLE IF NOT EXISTS regional_ev_status (
    id INT AUTO_INCREMENT PRIMARY KEY,
    region VARCHAR(50) NOT NULL,
    year INT NOT NULL,
    count_ev INT DEFAULT 0,
    count_charger INT DEFAULT 0,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

INSERT INTO regional_ev_status (region, year, count_ev, count_charger) VALUES
('ì„œìš¸', 2022, 43588, 3134435),
('ë¶€ì‚°', 2022, 13830, 1454620),
('ëŒ€êµ¬', 2022, 16487, 1196624),
('ì¸ì²œ', 2022, 13963, 1665982),
('ê´‘ì£¼', 2022, 6148, 696358),
('ëŒ€ì „', 2022, 8546, 685391),
('ìš¸ì‚°', 2022, 5380, 577018),
('ì„¸ì¢…', 2022, 2010, 184583),
('ê²½ê¸°', 2022, 43847, 75000),
('ê°•ì›', 2022, 9845, 6178462),
('ì¶©ë¶', 2022, 9148, 820770),
('ì¶©ë‚¨', 2022, 10798, 885230),
('ì „ë¶', 2022, 8552, 1168723),
('ì „ë‚¨', 2022, 9175, 953254),
('ê²½ë¶', 2022, 11321, 1165933),
('ê²½ë‚¨', 2022, 14363, 1491374),
('ì œì£¼', 2022, 25583, 1822584),
('ì„œìš¸', 2023, 62546, 3131756),
('ë¶€ì‚°', 2023, 24051, 1477671),
('ëŒ€êµ¬', 2023, 24658, 1207321),
('ì¸ì²œ', 2023, 28002, 1668130),
('ê´‘ì£¼', 2023, 10301, 704972),
('ëŒ€ì „', 2023, 15665, 693783),
('ìš¸ì‚°', 2023, 7644, 582082),
('ì„¸ì¢…', 2023, 3342, 191180),
('ê²½ê¸°', 2023, 83994, 6309522),
('ê°•ì›', 2023, 16609, 837291),
('ì¶©ë¶', 2023, 16943, 902705),
('ì¶©ë‚¨', 2023, 17876, 1197876),
('ì „ë¶', 2023, 14678, 965630),
('ì „ë‚¨', 2023, 16227, 1222480),
('ê²½ë¶', 2023, 19427, 1508867),
('ê²½ë‚¨', 2023, 25214, 1875655),
('ì œì£¼', 2023, 32917, 658721),
('ì„œìš¸', 2024, 76040, 3115018),
('ë¶€ì‚°', 2024, 36853, 1492971),
('ëŒ€êµ¬', 2024, 31027, 1228137),
('ì¸ì²œ', 2024, 42805, 1690747),
('ê´‘ì£¼', 2024, 13768, 710714),
('ëŒ€ì „', 2024, 19502, 706299),
('ìš¸ì‚°', 2024, 10703, 589841),
('ì„¸ì¢…', 2024, 4855, 193717),
('ê²½ê¸°', 2024, 122243, 6416272),
('ê°•ì›', 2024, 20951, 847183),
('ì¶©ë¶', 2024, 22091, 916170),
('ì¶©ë‚¨', 2024, 25728, 1223687),
('ì „ë¶', 2024, 22178, 972364),
('ì „ë‚¨', 2024, 25302, 1227294),
('ê²½ë¶', 2024, 27346, 1509616),
('ê²½ë‚¨', 2024, 39192, 1908328),
('ì œì£¼', 2024, 39472, 664014),
('ì„œìš¸', 2025, 86792, 3089607),
('ë¶€ì‚°', 2025, 46879, 1519799),
('ëŒ€êµ¬', 2025, 35794, 1226744),
('ì¸ì²œ', 2025, 57421, 1691403),
('ê´‘ì£¼', 2025, 16558, 714556),
('ëŒ€ì „', 2025, 23186, 715290),
('ìš¸ì‚°', 2025, 12836, 595546),
('ì„¸ì¢…', 2025, 6050, 196543),
('ê²½ê¸°', 2025, 160504, 6493062),
('ê°•ì›', 2025, 23798, 851977),
('ì¶©ë¶', 2025, 27505, 923130),
('ì¶©ë‚¨', 2025, 32402, 1242905),
('ì „ë¶', 2025, 27586, 976594),
('ì „ë‚¨', 2025, 32763, 1248167),
('ê²½ë¶', 2025, 34550, 1519826),
('ê²½ë‚¨', 2025, 49877, 1935627),
('ì œì£¼', 2025, 49513, 660745),
('ì„œìš¸', 2026, 105549, 3051822),
('ë¶€ì‚°', 2026, 63969, 1513640),
('ëŒ€êµ¬', 2026, 43579, 1216819),
('ì¸ì²œ', 2026, 83928, 1668479),
('ê´‘ì£¼', 2026, 20664, 708151),
('ëŒ€ì „', 2026, 27600, 718725),
('ìš¸ì‚°', 2026, 16711, 594578),
('ì„¸ì¢…', 2026, 8011, 196353),
('ê²½ê¸°', 2026, 218546, 6500095),
('ê°•ì›', 2026, 28771, 849930),
('ì¶©ë¶', 2026, 36062, 920277),
('ì¶©ë‚¨', 2026, 42166, 1247016),
('ì „ë¶', 2026, 33507, 972114),
('ì „ë‚¨', 2026, 42897, 1276296),
('ê²½ë¶', 2026, 46103, 1516539),
('ê²½ë‚¨', 2026, 70061, 1945079),
('ì œì£¼', 2026, 60966, 664307);
```

### 2. ì°¨ëŸ‰ ëª¨ë¸ ì •ë³´ í…Œì´ë¸” (ë¹„êµ ê¸°ëŠ¥ìš©)
```sql
CREATE TABLE IF NOT EXISTS vehicle_models (
    id INT AUTO_INCREMENT PRIMARY KEY,
    model_name VARCHAR(100) NOT NULL,
    fuel_type ENUM('ICE', 'EV') NOT NULL,
    price_manwon INT,
    efficiency FLOAT,
    fuel_cost_unit INT
);

INSERT INTO vehicle_models (model_name, fuel_type, price_manwon, efficiency, fuel_cost_unit) VALUES
('ê·¸ëœì € 2.5 ê°€ì†”ë¦°', 'ICE', 3800, 11.7, 1650),
('ì•„ì´ì˜¤ë‹‰ 6 Long Range', 'EV', 5500, 6.0, 340),
('ì•„ë°˜ë–¼ 1.6 ê°€ì†”ë¦°', 'ICE', 2300, 15.3, 1650),
('ëª¨ë¸ 3 RWD', 'EV', 5200, 5.1, 340);
```

### 3. FAQ í…Œì´ë¸”
```sql
CREATE TABLE IF NOT EXISTS faq_data (
    id INT AUTO_INCREMENT PRIMARY KEY,
    question TEXT NOT NULL,
    answer TEXT NOT NULL,
    category VARCHAR(50)
);

INSERT INTO faq_data (question, answer, category) VALUES
('2026ë…„ ì „ê¸°ì°¨ ë³´ì¡°ê¸ˆì€ ì–¼ë§ˆì¸ê°€ìš”?', 'ì§€ìì²´ë³„ë¡œ ìƒì´í•˜ë©°, ì„œìš¸ì‹œ ê¸°ì¤€ êµ­ë¹„+ì§€ë°©ë¹„ í•©ì‚° ìµœëŒ€ 800ë§Œì› ìˆ˜ì¤€ì…ë‹ˆë‹¤.', 'ë³´ì¡°ê¸ˆ'),
('ì¶©ì „ êµ¬ì—­ ë‚´ ì¼ë°˜ ì°¨ëŸ‰ ì£¼ì°¨ ì‹œ ë²Œê¸ˆì€?', 'ì¶©ì „ë²• ìœ„ë°˜ìœ¼ë¡œ 10ë§Œì›ì˜ ê³¼íƒœë£Œê°€ ë¶€ê³¼ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'ë²•ê·œ'),
('ê°€ì¥ ì €ë ´í•œ ì™„ì† ì¶©ì „ ì‹œê°„ëŒ€ëŠ”?', 'ê²½ë¶€í•˜ ì‹œê°„ëŒ€ì¸ ìì •ë¶€í„° ì˜¤ì „ 6ì‹œ ì‚¬ì´ê°€ ê°€ì¥ ì €ë ´í•©ë‹ˆë‹¤.', 'ì¶©ì „');
```

---

## ğŸš€ ì‹¤í–‰ ë° í™•ì¸

```bash
# Docker ì»¨í…Œì´ë„ˆ ë¹Œë“œ ë° ì‹¤í–‰
docker-compose up -d --build

# ì‹¤í–‰ í™•ì¸
docker ps
```

> [!NOTE]
> ìœ„ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œ í›„, `app.py`ë‚˜ `compare.py`ì—ì„œ `db_manager.fetch_query("SELECT * FROM regional_ev_status")`ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
